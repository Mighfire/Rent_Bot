import asyncio
import logging
import keyboards as kb
from handlers import order, catalog, arenda, obrat
from aiogram import Bot, Dispatcher, types, F
from aiogram.filters import Command
from aiogram.client.session.aiohttp import AiohttpSession

from config import TOKEN_API

# session = AiohttpSession(proxy="http://proxy.server:3128")
# –í–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
logging.basicConfig(level=logging.INFO)
# –û–±—ä–µ–∫—Ç –±–æ—Ç–∞
bot = Bot(TOKEN_API)  # ,session=session)
# –î–∏—Å–ø–µ—Ç—á–µ—Ä
dp = Dispatcher()
dp.include_routers(order.router, catalog.router, arenda.router, obrat.router)


# –•—ç–Ω–¥–ª–µ—Ä –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start
@dp.message(Command("start", "menu"))
async def cmd_start(message: types.Message):
    await message.answer("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ CompRent!ü§ñ\n"
                         "–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∞—à–µ–π —Ç–µ—Ö–Ω–∏–∫–æ–π –∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑!\n\n–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É üìñ–ö–∞—Ç–∞–ª–æ–≥ "
                         "–¥–ª—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è —Å –º–æ–¥–µ–ª—è–º–∏ –Ω–æ—É—Ç–±—É–∫–æ–≤.\n\n–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å –≤–∞–º –Ω—É–∂–Ω–∞ - –Ω–∞–∂–º–∏—Ç–µ "
                         "–∫–Ω–æ–ø–∫—É ‚úèÔ∏è–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è!", reply_markup=kb.keyboard_main,
                         parse_mode="HTML")


@dp.message(F.text.lower() == "–≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é")
async def back(message: types.Message):
    await message.answer("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ CompRent!ü§ñ\n"
                         "–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∞—à–µ–π —Ç–µ—Ö–Ω–∏–∫–æ–π –∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑!\n\n–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É üìñ–ö–∞—Ç–∞–ª–æ–≥ "
                         "–¥–ª—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è —Å –º–æ–¥–µ–ª—è–º–∏ –Ω–æ—É—Ç–±—É–∫–æ–≤.\n\n–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å –≤–∞–º –Ω—É–∂–Ω–∞ - –Ω–∞–∂–º–∏—Ç–µ "
                         "–∫–Ω–æ–ø–∫—É ‚úèÔ∏è–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è!", reply_markup=kb.keyboard_main,
                         parse_mode='HTML')


@dp.message(F.text.lower() == "üíª–æ –Ω–∞—Å")
async def about_us(message: types.Message):
    await message.answer("–üpe–¥–ªa–≥a–µ–º –≤ –∫—Äa—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é –∏–ª–∏ –¥–æ–ª–≥o—Åp–æ—á–Ω—É—é –∞—Äe–Ω–¥—É –Ω–æ—É—Ç–±—É–∫–∏ –¥–ª—è o—Ñ–∏—Å–∞, —É–¥–∞–ªe–Ω–∫–∏, "
                         "–∫o–ºa–Ω–¥–∏po–≤–∫–∏, –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ.\n–î–ª—è —Ñ–∏–∑–ª–∏—Ü (—Å –Ω–µ–±o–ª—å—à–∏–º –∑a–ª–æ–≥o–º), –¥–ª—è O–ûO, –ò–ü - –±e–∑ –∑a–ª–æ–≥–∞.\n–£ "
                         "–Ω–∞—Å —Ço–ª—å–∫–æ –ø—Äo—Ñ–µc—Å–∏o–Ωa–ª—å–Ω—ã–µ –±–∏–∑–Ω–µc –Ω–æ—É—Ç–±—É–∫–∏. –í—ã –∏–º–µ–µ—Ç–µ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å - –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å "
                         "–ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ü–û, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –ü–û.\n–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫–∞–∫ —Ñ–∏–∑–ª–∏—Ü–æ - –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É "
                         "–∞—Ä–µ–Ω–¥—ã —Å –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –∑–∞–ª–æ–≥–æ–º. –†–∞–∑–º–µ—Ä –∑–∞–ª–æ–≥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–æ—É—Ç–±—É–∫–∞.–î–ª—è —é—Ä–ª–∏—Ü–∞ –∑–∞–ª–æ–≥ "
                         "–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!\n–†–∞–±–æ—Ç–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, —á–µ–∫–∏.",
                         reply_markup=kb.keyboard_back)
    await message.answer(
        "–†–∞–±–æ—Ç–∞–µ–º —Å 10:00 –¥–æ 22:00\n–ë–æ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ\n–ù–∞—à —Å–∞–π—Ç: comp.rent\n–ü–æ–∑–≤–æ–Ω–∏—Ç—å –Ω–∞–º: +74994040374")


@dp.message(F.photo)
async def image_uploader(message: types.Message):
    photo_data = message.photo[-1]
    await message.answer(f"{photo_data.file_id}")


# –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–ª–ª–∏–Ω–≥–∞ –Ω–æ–≤—ã—Ö –∞–ø–¥–µ–π—Ç–æ–≤
async def main():
    await dp.start_polling(bot)


if __name__ == "__main__":
    asyncio.run(main())
